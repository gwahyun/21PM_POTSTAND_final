<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="event">

	<resultMap type="event" id="eventMap">
		<id column="event_no" property="eventNo"/>
		<result column="event_title" property="eventTitle"/>
		<result column="event_info" property="eventInfo"/>
		<result column="event_short" property="eventShort"/>
		<result column="event_start" property="eventStart"/>
		<result column="event_end" property="eventEnd"/>
		<result column="end_check" property="endCheck"/>
		<result column="event_thum" property="eventThum"/>
		<result column="type" property="type"/>
		<result column="discount" property="discount"/>
	</resultMap>
	
	<resultMap type="coupon" id="couponMap">
		<id column="COUPON_NO" property="couponNo"/>
		<result column="MEMBER_ID" property="memberId"/>
		<result column="TYPE" property="type"/>
		<result column="DISCOUNT" property="discount"/>
		<result column="START_DATE" property="startDate"/>
		<result column="VAL_DATE" property="valDate"/>
		<result column="USED_DATE" property="usedDate"/>
		<result column="COUPON_END" property="couponEnd"/>
		<result column="COUPON_AMOUNT" property="couponAmount"/>
		<association column="EVENT_NO" property="event" select="selectEventByPK"/>
	</resultMap>
	
	<select id="selectEventList" resultMap="eventMap">
		SELECT * FROM EVENT
	</select>
	<select id="selectEventPost" resultMap="eventMap">
		select * from event where event_no = #{"no"}
	</select>
	<insert id="insertCoupon">
		insert into coupon values(seq_coupon.nextval, #{map.put("memeberId")}, #{event.startDate}, #{event.valDate}, null, default, #{event.eventNo},1}
	</insert>
</mapper>
